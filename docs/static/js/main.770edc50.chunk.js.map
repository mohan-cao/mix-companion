{"version":3,"sources":["Spotify.js","GenreSelector.js","KeySelector.js","BPMSlider.js","LongPress.js","SearchBar.js","ResizableFlexbox.js","Results.js","ErrorSnackbar.js","App.js","serviceWorker.js","index.js"],"names":["CamelotKeyToIntegerAndMode","1A","1B","2A","2B","3A","3B","4A","4B","5A","5B","6A","6B","7A","7B","8A","8B","9A","9B","10A","10B","11A","11B","12A","12B","handleError","resp","json","status","error","message","FetchException","this","Error","fetchJSONWithOAuthToken","_callee","endpoint","token","regenerator_default","a","wrap","_context","prev","next","fetch","headers","Accept","Content-Type","Authorization","catch","x","sent","abrupt","stop","getTokenInNewWindow","client_id","redirect_url","scopes","nonce","window","crypto","getRandomValues","Uint32Array","callable_endpoint","Array","isArray","join","Promise","resolve","reject","popup","open","spotifyCallback","expires","state","parseInt","close","concat","_callee2","_context2","searchSpotify","_x4","_x5","_x6","_searchSpotify","apply","arguments","_callee3","searchTerm","type","_context3","console","log","_callee5","_ref","genres","_ref$bpm","bpm","key","songs","artist","replaceSongArtists","extractArtistToEndpoint","extractTrackToEndpoint","searchResponse","_searchResponse","mapped_responses","_context5","term","replace","m","p1","arr","artistsIds","map","obj","hasOwnProperty","length","track","id","slice","trackIds","all","t0","_ref2","Object","asyncToGenerator","mark","_callee4","k","modifiedEndpoint","_context4","value","_x9","t1","b","t2","reduce","GenreSelector","_this$props","props","selectedGenre","availableGenres","onChange","onRefreshClicked","style","react_default","createElement","FormControl","InputLabel","shrink","htmlFor","whiteSpace","verticalAlign","display","marginLeft","onClick","index_es","icon","faSync","color","Select","minWidth","flex","multiple","input","Input","name","e","target","MenuItem","React","PureComponent","KeySelector","classes","camelotKey","disabled","className","group","camelotMinorKey","item","camelotMajorKey","withStyles","theme","paddingLeft","spacing","fontWeight","typography","fontWeightMedium","opacity","MenuGroup","cursor","&:hover","backgroundColor","BPMSlider","min","max","height","selectedBpm","onBpmChange","onLongPress","width","Slider","assign","callback","undefined","ms","_useState","useState","_useState2","slicedToArray","startLongPress","setStartLongPress","useEffect","timerId","setTimeout","clearTimeout","onMouseDown","onMouseUp","onMouseLeave","onTouchStart","onTouchEnd","useLongPress","orientation","newValue","valueLabelDisplay","supportedValues","Track","Artist","Genre","SearchBar","flexSizing","flexGrow","flexBasis","flexShrink","marginRight","TextField","query","placeholder","InputLabelProps","disableAnimation","label","defaultProps","ResizableFlexbox","childrenWidth","children","_useResizeObserver","useResizeObserver","_useResizeObserver2","ref","justifyContent","objectSpread","Math","floor","flexDirection","alignItems","flexWrap","mode","A","B","keyText","GetCamelotWheelColor","displayKey","alpha","keyHue","indexOf","keySaturationValuePair","GetCamelotWheelColorText","ErrorDiv","margin","boxSizing","fontSize","Results","data","rowPadding","Results_ErrorDiv","reactObjects","keys","accumulator","musicalKey","result_obj","themeCol","themeTextCol","elements","tracks","sort","popularity","backgroundImage","album","images","url","artists","art","i","href","external_urls","spotify","preventDefault","rel","spanJoiner","push","marginBottom","toConsumableArray","ErrorSnackbar","onClose","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","ContentProps","aria-describedby","formatKey","number","isMinor","DEFAULT_TEMPO","DEFAULT_KEY_NUM","DEFAULT_KEY_IS_MINOR","rotate12","amount","handleLocationQueryChanges","_this","queryParams","QueryString","parse","location","hash","access_token","expires_in","opener","handleSpotifyCallback","expiry","Date","getTime","setNewToken","localStorage","getItem","setState","history","replaceState","searchParam","searchTerms","base64","JSON","atob","decompressSearchTerms","startSearch","App","_this2","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","results","bind","setItem","_this3","then","str","val","toLowerCase","_this4","_x3","_getGenres","getGenres","code","getToken","_this5","_this$state","errors","_x7","_x8","_getRecommendationsBasedOnAttributes","getRecommendationsBasedOnAttributes","split","trim","hashObj","btoa","stringify","compressSearchTerms","shiftKey","_ref3","_this6","_this$state2","overflow","src_KeySelector","setKey","SearchBar_SearchBar","setSearchTerms","GenreSelector_GenreSelector","marginTop","Button","variant","document","documentElement","handleBpmChange","padding","src_ResizableFlexbox","faSpotify","Component","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","ReactDOM","render","src_App_0","getElementById","URL","process","origin","addEventListener","response","contentType","get","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.770edc50.chunk.js","sourcesContent":["const CamelotKeyToIntegerAndMode = {\n  \"1A\":  [8,  0],   \"1B\":  [8,  1],\n  \"2A\":  [3,  0],   \"2B\":  [3,  1],\n  \"3A\":  [10, 0],   \"3B\":  [10, 1],\n  \"4A\":  [5,  0],   \"4B\":  [5,  1],\n  \"5A\":  [0,  0],   \"5B\":  [0,  1],\n  \"6A\":  [7,  0],   \"6B\":  [7,  1],\n  \"7A\":  [2,  0],   \"7B\":  [2,  1],\n  \"8A\":  [9,  0],   \"8B\":  [9,  1],\n  \"9A\":  [4,  0],   \"9B\":  [4,  1],\n  \"10A\": [11, 0],   \"10B\": [11, 1],\n  \"11A\": [6,  0],   \"11B\": [6,  1],\n  \"12A\": [1,  0],   \"12B\": [1,  1],\n}\n\nfunction secureMathRandom() {\n  // Divide a random UInt32 by the maximum value (2^32 -1) to get a result between 0 and 1\n  return window.crypto.getRandomValues(new Uint32Array(1))[0] // 4294967295;\n}\n\nfunction handleError(resp, json) {\n  if (resp.status === 401) throw resp.status\n  if (resp.status !== 200) {\n    if (json && json.error && json.error.message) throw json.error.message\n    throw resp.status\n  }\n}\n\nclass FetchException extends Error {\n  toString() {\n    return this.message\n  }\n}\n\nasync function fetchJSONWithOAuthToken(endpoint, token) {\n  const resp = await fetch(endpoint, {\n    headers: {\n      \"Accept\": \"application/json\",\n      \"Content-Type\": \"application/json\",\n      \"Authorization\": \"Bearer \" + token\n    }\n  }).catch(x => { throw new FetchException(\"Either your internet connection sucks, or Spotify's API is down..\"); })\n  return resp;\n}\n\nexport function getTokenInNewWindow(client_id, redirect_url, scopes) {\n  const endpoint = \"https://accounts.spotify.com/authorize\"\n  let nonce = secureMathRandom();\n  let callable_endpoint = endpoint + \"?response_type=token\"\n  callable_endpoint += \"&redirect_uri=\" + redirect_url\n  callable_endpoint += \"&client_id=\" + client_id\n  if (scopes) callable_endpoint += \"&scopes=\" + (Array.isArray(scopes) ? scopes.join(' ') : scopes)\n  callable_endpoint += \"&state=\" + nonce\n\n  return new Promise((resolve, reject) => {\n    let popup = window.open(callable_endpoint, 'Login with Spotify', 'width=800,height=600')\n    window.spotifyCallback = (token, expires, state) => {\n      state = parseInt(state)\n      popup.close()\n      if (state !== nonce) {\n        reject(`Nonce is invalid, expected: ${nonce} but got ${state}`)\n      } else {\n        resolve({ token: token, expires: expires })\n      }\n    }\n  })\n}\n\nexport async function getGenres(token) {\n  const endpoint = \"https://api.spotify.com/v1/recommendations/available-genre-seeds\"\n  const resp = await fetchJSONWithOAuthToken(endpoint, token)\n  if (resp.status !== 200) return Promise.reject()\n  return await resp.json()\n}\n\nexport async function searchSpotify(token, searchTerm, type) {\n  if (!searchTerm) return Promise.reject(\"No search terms provided\")\n  const endpoint = \"https://api.spotify.com/v1/search?q=\" + searchTerm + \"&type=\" + type\n  console.log(endpoint)\n  const resp = await fetchJSONWithOAuthToken(endpoint, token)\n  const json = await resp.json()\n  handleError(resp, json)\n  return json\n}\n\nexport async function getRecommendationsBasedOnAttributes(token, { genres, bpm=120, key, songs, artist }) {\n  const replaceSongArtists = (term) => term.replace(/\\s*\\((.*)\\)\\s*/g, (m, p1) => ` artist:\"${p1}\" `)\n  const extractArtistToEndpoint = (arr) => {\n    if(!Array.isArray(arr)) throw new FetchException(400)\n    const artistsIds = arr.map(obj => {\n      if (!obj.hasOwnProperty(\"artists\") || !obj[\"artists\"][\"items\"].length) return \"\";\n      return obj[\"artists\"][\"items\"].map(track => track.id).slice(0, 1).join('')\n    }).join(',');\n    if (!artistsIds) throw new FetchException(\"No artists found using your search terms\")\n    return \"&seed_artists=\" + artistsIds\n  }\n  const extractTrackToEndpoint = (arr) => {\n    if(!Array.isArray(arr)) throw new FetchException(400)\n    const trackIds = arr.map(obj => {\n      if (!obj.hasOwnProperty(\"tracks\") || !obj[\"tracks\"][\"items\"].length) return \"\";\n      return obj[\"tracks\"][\"items\"].map(track => track.id).slice(0, 1).join('')\n    }).join(',')\n    if (!trackIds) throw new FetchException(\"No tracks found using your search terms\")\n    return \"&seed_tracks=\" + trackIds\n  }\n\n  const endpoint = \"https://api.spotify.com/v1/recommendations\"\n  let callable_endpoint = endpoint + '?'\n  if (Array.isArray(bpm) && bpm.length === 2) callable_endpoint += \"min_tempo=\" + bpm[0] + \"&max_tempo=\" + bpm[1]\n  else callable_endpoint += \"min_tempo=\" + (bpm - 10) + \"&max_tempo=\" + (bpm + 10)\n  \n  try {\n    if (songs) {\n      const searchResponse = await Promise.all((Array.isArray(songs) ? songs : [songs]).map((term) => searchSpotify(token, replaceSongArtists(term), \"track\")))\n      callable_endpoint += extractTrackToEndpoint(searchResponse)\n    } else if (artist) {\n      const searchResponse = await Promise.all((Array.isArray(artist) ? artist : [artist]).map((term) => searchSpotify(token, term, \"artist\")))\n      callable_endpoint += extractArtistToEndpoint(searchResponse)\n    } else if (genres) {\n      callable_endpoint += \"&seed_genres=\" + (Array.isArray(genres) ? genres.join(',') : genres)\n    } else {\n      return Promise.reject(\"No search terms!\")\n    }\n  } catch (status) {\n    if (typeof status === 'number' && status === 400) return Promise.reject(\"Server fucked up\");\n    else return Promise.reject(status)\n  }\n  \n  let mapped_responses = (await Promise.all((!key ? [] : (Array.isArray(key) ? key : [key]))\n  .map(async k => {\n    let modifiedEndpoint = callable_endpoint + \"&min_key=\" + CamelotKeyToIntegerAndMode[k][0] + \"&max_key=\" + CamelotKeyToIntegerAndMode[k][0]\n    modifiedEndpoint += \"&min_mode=\" + CamelotKeyToIntegerAndMode[k][1] + \"&max_mode=\" + CamelotKeyToIntegerAndMode[k][1]\n    console.log(modifiedEndpoint)\n    const resp = await fetchJSONWithOAuthToken(modifiedEndpoint, token);\n    const json = await resp.json();\n    handleError(resp, json);\n    return { key: k, value: json };\n  })))\n  .reduce((a, b) => {\n    if (a.hasOwnProperty(b.key)) return a;\n    a[b.key] = b.value\n    return a;\n  }, {});\n\n  return mapped_responses\n}","import React from 'react';\nimport { Select, MenuItem, FormControl, InputLabel, Input } from '@material-ui/core';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faSync } from '@fortawesome/free-solid-svg-icons'\n\nexport default class GenreSelector extends React.PureComponent {\n  render() {\n    const { selectedGenre, availableGenres, onChange, onRefreshClicked, style } = this.props;\n    return (\n      <FormControl style={style}>\n        <InputLabel shrink htmlFor=\"genre\" style={{ whiteSpace: 'nowrap' }}>\n          <span style={{ verticalAlign: 'top' }}>Genre</span>\n          <div style={{ display: 'inline', marginLeft: 4 }} onClick={() => onRefreshClicked()}>\n            <FontAwesomeIcon icon={faSync} style={{ color: '#393' }} />\n          </div>\n        </InputLabel>\n        <Select\n          style={{ minWidth: 70, flex: 1 }}\n          multiple\n          input={<Input name=\"genre\" />}\n          value={selectedGenre}\n          onChange={(e) => onChange(e.target.value)}\n        >\n          {(availableGenres && availableGenres.length > 0 ?\n            availableGenres.map((x) => <MenuItem key={x} value={x}>{x.replace(/-/g, ' ')}</MenuItem>) : <MenuItem>No genres available</MenuItem>)}\n        </Select>\n      </FormControl>\n    );\n  }\n}\n","import React from 'react';\nimport { withStyles, Select, MenuItem, FormControl, InputLabel, Input } from '@material-ui/core';\n\nclass KeySelector extends React.PureComponent {\n  static camelotMinorKey = [\n    \"1A\", \"2A\", \"3A\", \"4A\", \"5A\", \"6A\", \"7A\", \"8A\", \"9A\", \"10A\", \"11A\", \"12A\",\n  ];\n  static camelotMajorKey = [\n    \"1B\", \"2B\", \"3B\", \"4B\", \"5B\", \"6B\", \"7B\", \"8B\", \"9B\", \"10B\", \"11B\", \"12B\",\n  ];\n  render() {\n    const { classes, camelotKey, onChange, style } = this.props;\n    return (\n      <FormControl style={style}>\n        <InputLabel shrink htmlFor=\"key\">\n          Key\n        </InputLabel>\n        <Select input={<Input name=\"key\" />} name=\"key\" value={camelotKey} onChange={(e) => onChange(e)}>\n          <MenuItem disabled className={classes.group}>Minor keys</MenuItem>\n          {KeySelector.camelotMinorKey.map((x) => <MenuItem key={x} className={classes.item} value={x}>{x}</MenuItem>)}\n          <MenuItem disabled className={classes.group}>Major keys</MenuItem>\n          {KeySelector.camelotMajorKey.map((x) => <MenuItem key={x} className={classes.item} value={x}>{x}</MenuItem>)}\n        </Select>\n      </FormControl>\n    );\n  }\n}\n\nconst styles = (theme) => ({\n  item: {\n    paddingLeft: theme.spacing(3),\n  },\n  group: {\n    fontWeight: theme.typography.fontWeightMedium,\n    opacity: 1,\n  },\n  MenuItem: {\n    paddingLeft: theme.spacing(3)\n  },\n  MenuGroup: {\n    fontWeight: theme.typography.fontWeightMedium,\n    opacity: 1,\n    cursor: \"default\",\n    \"&:hover\": {\n      backgroundColor: \"transparent !important\"\n    }\n  }\n})\n\nexport default withStyles(styles)(KeySelector)","import React from 'react';\nimport { InputLabel } from '@material-ui/core';\nimport { Slider } from '@material-ui/lab';\nimport useLongPress from './LongPress';\n\nexport default function BPMSlider({ min, max, height, selectedBpm, onBpmChange, onLongPress }) {\n  return (\n    <div>\n      <InputLabel style={{ width: '100%' }} shrink>BPM</InputLabel>\n      <div style={{ display: 'flex', height: height }}>\n        <Slider\n          {...useLongPress(onLongPress, 500)}\n          orientation=\"vertical\"\n          min={min} max={max}\n          value={selectedBpm}\n          onChange={(e, newValue) => onBpmChange(e, newValue)}\n          valueLabelDisplay=\"auto\"\n        />\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\n\nexport default function useLongPress(callback = () => {}, ms = 300) {\n  const [startLongPress, setStartLongPress] = useState(false);\n\n  useEffect(() => {\n    let timerId;\n    if (startLongPress) {\n      timerId = setTimeout(callback, ms);\n    } else {\n      clearTimeout(timerId);\n    }\n\n    return () => {\n      clearTimeout(timerId);\n    };\n  }, [callback, ms, startLongPress]);\n\n  return {\n    onMouseDown: () => { setStartLongPress(true); return true; },\n    onMouseUp: () => { setStartLongPress(false); return true; },\n    onMouseLeave: () => { setStartLongPress(false); return true; },\n    onTouchStart: () => { setStartLongPress(true); return true; },\n    onTouchEnd: () => { setStartLongPress(false); return true; },\n  };\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FormControl, TextField, Select, MenuItem, InputLabel } from '@material-ui/core';\n\nconst supportedValues = {\n  \"Track\": \"Never Gonna Give You Up, Robot Rock, Bad (Michael Jackson)\",\n  \"Artist\": \"Kanye West, Jimi Hendrix\",\n  \"Genre\": \"Pop, Rock, Country\",\n}\n\nexport default class SearchBar extends React.PureComponent {\n  render() {\n    const { style, type, value, onChange, GenreSelector } = this.props;\n    const flexSizing = (style.flex ? { flex: style.flex } : { flexGrow: style.flexGrow, flexBasis: style.flexBasis, flexShrink: style.flexShrink })\n    return (\n      <FormControl style={style}>\n        <InputLabel shrink style={{ whiteSpace: 'nowrap' }}>\n          Type\n        </InputLabel>\n        <Select value={type} onChange={(e) => onChange({ type: e.target.value })} style={{ marginRight: 5 }}>\n          <MenuItem value=\"Track\">Track</MenuItem>\n          <MenuItem value=\"Artist\">Artist</MenuItem>\n          <MenuItem value=\"Genre\">Genre</MenuItem>\n        </Select>\n        {\n          (type === \"Genre\") ?\n          GenreSelector\n          :\n          <TextField\n            value={value}\n            onChange={(e) => onChange({ query: e.target.value })}\n            style={flexSizing}\n            placeholder={supportedValues[type]}\n            InputLabelProps={{ shrink: true, disableAnimation: false }}\n            label=\"Search\"\n          />\n        }\n      </FormControl>\n    );\n  }\n}\n\nSearchBar.defaultProps = {\n  type: \"Track\"\n}\n\nSearchBar.propTypes = {\n  type: PropTypes.oneOf(Object.keys(supportedValues))\n}","import React from 'react';\nimport useResizeObserver from \"use-resize-observer\";\n\nconst ResizableFlexbox = ({ childrenWidth, children, style }) => {\n  const [ref, width] = useResizeObserver();\n  return (<div ref={ref} style={{\n    width: '100%',\n    display: 'flex',\n    justifyContent: 'center'\n  }}>\n    <div style={{\n      width: Math.floor(width / childrenWidth) * childrenWidth,// + padding,\n      display: 'flex', flexDirection: 'row',\n      justifyContent: 'flex-start', alignItems: 'center',\n      flexWrap: 'wrap',\n      ...style\n    }}>\n      {children}\n    </div>\n  </div>);\n};\n\nexport default ResizableFlexbox;\n","import React from 'react';\nimport { spanJoiner } from './App';\n\nconst mode = {\n  \"A\": [30, 60],\n  \"B\": [70, 90],\n}\nconst key = [\"6\", \"5\", \"4\", \"3\", \"2\", \"1\", \"12\", \"11\", \"10\", \"9\", \"8\", \"7\"]\n\nconst keyText = {\n  \"12A\": \"12A - Db Minor\",\n  \"1A\":  \"1A - Ab Minor\",\n  \"2A\":  \"2A - Eb Minor\",\n  \"3A\":  \"3A - Bb Minor\",\n  \"4A\":  \"4A - F Minor\",\n  \"5A\":  \"5A - C Minor\",\n  \"6A\":  \"6A - G Minor\",\n  \"7A\":  \"7A - D Minor\",\n  \"8A\":  \"8A - A Minor\",\n  \"9A\":  \"9A - E Minor\",\n  \"10A\": \"10A - B Minor\",\n  \"11A\": \"11A - F# Minor\",\n  \"12B\": \"12B - E Major\",\n  \"1B\":  \"1B - B Major\",\n  \"2B\":  \"2B - F Major\",\n  \"3B\":  \"3B - D Major\",\n  \"4B\":  \"4B - Ab Major\",\n  \"5B\":  \"5B - Eb Major\",\n  \"6B\":  \"6B - Bb Major\",\n  \"7B\":  \"7B - F Major\",\n  \"8B\":  \"8B - C Major\",\n  \"9B\":  \"9B - G Major\",\n  \"10B\": \"10B - D Major\",\n  \"11B\": \"11B - A Major\",\n}\n\nconst GetCamelotWheelColor = (displayKey, alpha=1) => {\n  const keyHue = Math.max(0, key.indexOf(displayKey.slice(0, -1))) * (360/key.length)\n  const keySaturationValuePair = mode[displayKey.slice(-1)]\n  return `hsla(${keyHue}, ${keySaturationValuePair[0]}%, ${keySaturationValuePair[1]}%, ${alpha})`\n}\n\nconst GetCamelotWheelColorText = (displayKey) => {\n  const keyHue = Math.max(0, key.indexOf(displayKey.slice(0, -1))) * (360/key.length)\n  const keySaturationValuePair = mode[displayKey.slice(-1)]\n  return `hsl(${keyHue}, ${keySaturationValuePair[0]}%, ${keySaturationValuePair[1] * 0.3}%)`\n}\n\nconst ErrorDiv = () => {\n  return (\n    <div style={{ margin: '0 auto', backgroundColor: 'black', width: '100%', height: '6em', color: 'white', boxSizing: 'content-box' }}>\n      <div style={{ height: '100%', display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center' }}>\n        <h1 style={{ fontSize: '2em', margin: 0 }}>No results</h1>\n      </div>\n    </div>\n  );\n}\n\nfunction createDivs(result_obj) {\n  if (!result_obj || !result_obj.tracks || result_obj.tracks.length < 1) return <div />;\n  return result_obj.tracks\n         .sort((a, b) => b.popularity - a.popularity)\n         .map((track) => (\n            <div key={track.id} className=\"result-box\" style={{ backgroundImage: `url(${track.album ? track.album.images[0].url : ''})` }}>\n              <div className=\"result-vinyl\">\n                <div className=\"song-details\">\n                  <div>\n                    <h1 className=\"artist-name\">\n                      {track.artists.map((art, i) => (\n                        <a className=\"artist-name\" key={art.id + \"\" + i} href={art.external_urls.spotify}\n                          onClick={(e) => e.preventDefault()} target=\"_blank\" rel=\"noreferrer noopener\">\n                          {art.name}\n                        </a>\n                      )).reduce(spanJoiner, [])}\n                    </h1>\n                    <h2 className=\"song-name\">\n                      <a className=\"song-name\" href={track.external_urls.spotify} target=\"_blank\" rel=\"noreferrer noopener\">\n                        {track.name}\n                      </a>\n                    </h2>\n                  </div>\n                </div>\n              </div>\n              <div className=\"result-vinyl-outer\"></div>\n              <div className=\"result-vinyl-inner\"></div>\n              <div className=\"result-vinyl-dot\"></div>\n            </div>\n         ));\n}\n\nexport default function Results({ data, rowPadding }) {\n  if (typeof data !== 'object') return <ErrorDiv />\n  const reactObjects = Object.keys(data).reduce((accumulator, musicalKey) => {\n    const themeCol = GetCamelotWheelColor(musicalKey);\n    const themeTextCol = GetCamelotWheelColorText(musicalKey)\n    const elements = createDivs(data[musicalKey])\n    if (elements.length) {\n      accumulator.push(<div key={musicalKey} className=\"key-row\" style={{ backgroundColor: themeCol, color: themeTextCol, marginBottom: rowPadding }}>\n        <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center' }}>\n          <h1 style={{ fontSize: '2em', margin: 0 }}>{keyText[musicalKey]}</h1>\n        </div>\n      </div>, ...elements)\n    }\n    return accumulator\n  }, [])\n  if (!reactObjects.length) return <ErrorDiv />\n  return reactObjects\n}\n","import React from 'react';\nimport { Snackbar } from '@material-ui/core';\n\nexport default function ErrorSnackbar({ open, error, onClose }) {\n  return (<Snackbar anchorOrigin={{\n    vertical: 'bottom',\n    horizontal: 'left',\n  }} open={open} onClose={onClose} autoHideDuration={6000} ContentProps={{\n    'aria-describedby': 'message-id',\n  }} message={<span id=\"message-id\">Error: {error} </span>} />);\n}\n","import React from 'react';\nimport './App.css';\nimport QueryString from 'query-string'\nimport { getTokenInNewWindow, getRecommendationsBasedOnAttributes, getGenres } from './Spotify';\nimport GenreSelector from './GenreSelector';\nimport KeySelector from './KeySelector';\nimport { Button } from '@material-ui/core';\nimport BPMSlider from './BPMSlider';\nimport SearchBar from './SearchBar';\nimport ResizableFlexbox from './ResizableFlexbox';\nimport Results from './Results';\nimport ErrorSnackbar from './ErrorSnackbar';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faSpotify } from '@fortawesome/free-brands-svg-icons'\n\nconst formatKey = (number, isMinor) => number + (isMinor ? \"B\" : \"A\")\nconst stringToKey = (str) => [ parseInt(str.slice(0, -1)), (str.slice(-1).toLowerCase() === \"b\" ? true : false)]\nconst DEFAULT_TEMPO = 120\nconst DEFAULT_KEY_NUM = 1\nconst DEFAULT_KEY_IS_MINOR = false\nconst website = \"https://www.mohancao.me/mix-companion\"\n\nexport const spanJoiner = (a, b) => {\n  if (a.length === 0) a.push(b)\n  else a.push(<br key={a.length+1}/>, b)\n  return a\n}\n\nconst rotateNumber = (a, b) => (prev, amount) => {\n  amount = prev + amount;\n  amount %= (b - a + 1);\n  if (amount < a) amount += b\n  return amount\n}\n\nconst rotate12 = rotateNumber(1, 12)\n\nfunction compressSearchTerms({ selectedBpm, number, isMinor, type, query }) {\n  return btoa(JSON.stringify([ selectedBpm, number, isMinor, type, query ]))\n}\n\nfunction decompressSearchTerms(base64) {\n  console.log(base64)\n  try {\n    const arr = JSON.parse(atob(base64))\n    if ((!Array.isArray(arr[0]) && typeof arr[0] !== 'number')) return {}\n    if (typeof arr[1] !== 'number' || arr[1] < 1 || arr[1] > 12) return {}\n    if ((!Array.isArray(arr[3]) && typeof arr[3] !== 'string')) return {}\n    if (!Array.isArray(arr[4]) && typeof arr[4] !== 'string') return {}\n    return { selectedBpm: arr[0], number: parseInt(arr[1]), isMinor: !!arr[2], type: arr[3], query: arr[4] }\n  } catch (e) {\n    console.error(e)\n    return {}\n  }\n}\n\nfunction handleSpotifyCallback(access_token, expires_in, nonce) {\n  if (window.opener && window.opener.spotifyCallback) {\n    try {\n      window.opener.spotifyCallback(access_token, expires_in, nonce)\n    } catch (e) {\n      // we're in local development. don't do anything lol\n    }\n  }\n}\n\nfunction handleLocationQueryChanges() {\n  let queryParams = QueryString.parse(window.location.hash)\n  if (!queryParams) return;\n  let { access_token, expires_in, state } = queryParams;\n  handleSpotifyCallback(access_token, expires_in, state)\n  // Handle tokens\n  if (access_token && expires_in) {\n    let expiry = (new Date().getTime() + (parseInt(expires_in) * 1000 * 0.9))\n    this.setNewToken(access_token, expiry) // always refresh a little earlier than needed (0.9*actual expiry time)\n  } else {\n    const token = window.localStorage.getItem(\"token\")\n    const expires = window.localStorage.getItem(\"expires\")\n    if (new Date().getTime() < parseInt(expires)) {\n      this.setState({ token, expires })\n    }\n  }\n  window.history.replaceState(null, null, ' ');\n\n  // Handle bookmarked searches and history\n  const searchParam = queryParams[\"search\"]\n  if (searchParam) {\n    const searchTerms = decompressSearchTerms(searchParam)\n    if (Object.keys(searchTerms).length > 0) {\n      console.log(searchTerms)\n      this.setState(searchTerms, () => this.startSearch())\n      window.location.hash += (window.location.hash ? \"&search=\" : \"search=\") + searchParam\n    }\n  }\n}\n\nclass App extends React.Component {\n  constructor() {\n    super()\n    this.state = {\n      number: DEFAULT_KEY_NUM,\n      isMinor: DEFAULT_KEY_IS_MINOR,\n      token: null,\n      expires: 0,\n      availableGenres: ['country', 'classical', 'rock', 'pop', 'blues', 'r-n-b'],\n      results: null,\n      selectedBpm: DEFAULT_TEMPO,\n      type: \"Track\",\n      query: \"\",\n    }\n  }\n\n  componentDidMount() {\n    /// block start\n    handleLocationQueryChanges.bind(this)()\n    /// block end\n  }\n\n  setNewToken(token, expires) {\n    if (window.localStorage.getItem(\"token\") === token){\n      return;\n    } else {\n      window.localStorage.setItem(\"token\", token)\n      window.localStorage.setItem(\"expires\", expires)\n      this.setState({ token: token, expires: expires })\n    }\n  }\n\n  getToken() {\n    getTokenInNewWindow(\"4a4e5068f705407480266c7e7c8d7dfa\", website).then(({ token, expires }) => {\n      this.setNewToken(token, expires)\n    })\n  }\n\n  setKey(e) {\n    const val = stringToKey(e.target.value)\n    this.setState({ number: val[0] ? val[0] : DEFAULT_KEY_NUM, isMinor: val[1] ? val[1] : DEFAULT_KEY_IS_MINOR })\n  }\n\n  getGenres() {\n    getGenres(this.state.token)\n    .then(x => this.setState({ availableGenres: x.genres }))\n    .catch((code) => {\n      // token expired\n      if (code === 401) this.getToken();\n      else this.setState({ error: ''+code });\n    })\n  }\n\n  startSearch() {\n    const { token, selectedBpm, number, isMinor, type, query } = this.state;\n\n    let errors = ''\n    if (type === \"Genre\" && query && query.length && query.length > 5) errors += \"Sorry, can't have more than 5 genres. \"\n    if (errors) { this.setState({ error: errors }); return; }\n\n    getRecommendationsBasedOnAttributes(token, {\n      genres: (type === 'Genre' ? query : null),\n      bpm: selectedBpm,\n      key: [formatKey(number, isMinor), formatKey(rotate12(number, -1), isMinor), formatKey(rotate12(number, 1), isMinor), formatKey(number, !isMinor)],\n      songs: (type === 'Track' ? query.split(',').map(x => x.trim()) : null),\n      artist: (type === 'Artist' ? query.split(',').map(x => x.trim()) : null),\n    })\n    .then(x => {\n      const hashObj = QueryString.parse(window.location.hash)\n      hashObj[\"search\"] = compressSearchTerms({ selectedBpm, number, isMinor, type, query })\n      window.location.hash = QueryString.stringify(hashObj)\n      this.setState({ results: x })\n    })\n    // .catch((code) => {\n    //   // token expired\n    //   if (code === 401) this.getToken()\n    //   else this.setState({ error: ''+code })\n    // })\n  }\n\n  handleBpmChange(e, newValue) {\n    if (e.shiftKey && typeof this.state.selectedBpm === 'number') newValue = [this.state.selectedBpm, newValue] \n    else if (Array.isArray(newValue) && newValue[0] === newValue[1]) newValue = newValue[0]\n    this.setState({ selectedBpm: newValue })\n  }\n\n  setSearchTerms({ query, type }) {\n    if (type) {\n      this.setState({ type, query: '' })\n    } else {\n      this.setState({ query })\n    }\n  }\n\n  render() {\n    const { number, isMinor, token, results, availableGenres, selectedBpm, type, query, error } = this.state;\n    if (!token) return (\n      <div className=\"App\" style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100vh' }}>\n        <Button variant=\"outlined\" onClick={() => this.getToken()} className=\"loginBtn\"><FontAwesomeIcon icon={faSpotify} style={{ marginRight: 5 }} />Login to Spotify to use this app</Button>\n      </div>\n    )\n    return (\n      <div className=\"App\">\n        <ErrorSnackbar open={!!error} error={error} onClose={() => this.setState({ error: null })} />\n        <div className=\"search\">\n          <div style={{ display: 'flex', flexDirection: 'column', width: '70%', flex: '1 1 auto', overflow: 'auto' }}>\n            <div style={{ display: 'flex' }}>\n              <KeySelector style={{ flexDirection: 'row', flex: '0 0 auto', alignItems: 'center' }} camelotKey={formatKey(number, isMinor)} onChange={(e) => this.setKey(e)} />\n              <SearchBar style={{ flexDirection: 'row', flex: '1 1 150px', minWidth: '150px', alignItems: 'center', marginLeft: 5 }}\n                         type={type}\n                         value={query}\n                         onChange={(e) => this.setSearchTerms(e)}\n                         GenreSelector={<GenreSelector\n                                         style={{ flexDirection: 'row', flex: '1 1 auto', alignItems: 'center', marginLeft: 5 }}\n                                         selectedGenre={type === 'Genre' && Array.isArray(query) ? query : []} availableGenres={availableGenres}\n                                         onChange={(val) => (val.length <= 5) && this.setState({ query: val })}\n                                         onRefreshClicked={() => this.getGenres()}\n                                        />}\n              />\n            </div>\n            <div style={{ marginTop: 5 }}>\n              <Button style={{ width: '100%' }} color=\"primary\" variant=\"contained\" onClick={() => this.startSearch()}>Start search</Button>\n            </div>\n          </div>\n          <div style={{ flex: '0 1 auto' }}>\n            <BPMSlider onLongPress={() => ('ontouchstart' in document.documentElement) && this.handleBpmChange({}, [50, 250])} selectedBpm={selectedBpm} onBpmChange={(e, newValue) => this.handleBpmChange(e, newValue)} height={75} min={0} max={300} />\n          </div>\n        </div>\n        <div className=\"suggest-bar\">\n          Getting recommendations for <span style={{ color: '#AEA' }}>{type.toLowerCase()}s</span>\n          \n            {query ? (<span> like <span style={{ color: '#EAA' }}>{(Array.isArray(query) ? query.join(', ') : query)}</span></span>) : ''}\n          \n          \n            {(Array.isArray(selectedBpm) && selectedBpm.length === 2 ? (<span> and only tracks that are <span style={{ color: '#AAE' }}>{selectedBpm[0]}</span> to <span style={{ color: '#AAE' }}>{selectedBpm[1]} bpm</span> </span>) :\n              (typeof selectedBpm === 'number' ? (<span> for tracks with <span style={{ color: '#AAE' }}>{selectedBpm} (± 10) bpm</span> </span>) : '')\n            )}\n          \n        </div>\n        <div style={{ padding: '20px 0', display: 'flex', justifyContent: 'center' }}>\n          {(results ? \n            <ResizableFlexbox childrenWidth={210} style={{ backgroundColor: 'rgba(0, 0, 0, 0.2)' }}>\n              <Results data={results} rowPadding={0} />\n            </ResizableFlexbox>\n            :\n            <div />\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}